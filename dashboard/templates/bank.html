{% extends "main_dashboard_layout.html" %}
{% block title %}은행 - {{guild_name}}{% endblock %}

{% block dashboard_content %}
    <h2 class="content-title">{{ guild_name }} 은행 데이터</h2>
    <p class="content-description">서버 내 모든 은행 계좌 및 대출 정보를 확인합니다.</p>

    <div class="dashboard-data-section">
        <h3>계좌 정보</h3>
        {% if bank_accounts %}
        <table>
            <thead>
                <tr>
                    <th>사용자 ID</th>
                    <th>사용자 이름</th>
                    <th>잔액 (위키원)</th>
                </tr>
            </thead>
            <tbody>
                {% for account in bank_accounts %}
                <tr>
                    <td>{{ account.user_id }}</td>
                    <td>{{ account.username }}</td>
                    <td>{{ "{:,}".format(account.balance) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>은행 계좌 정보가 없습니다.</p>
        {% endif %}

        <h3 style="margin-top: 40px;">대출 정보</h3>
        {% if loans %}
        <table>
            <thead>
                <tr>
                    <th>대출 ID</th>
                    <th>사용자 이름</th>
                    <th>대출 금액</th>
                    <th>상환 금액</th>
                    <th>남은 상환액</th>
                    <th>상태</th>
                    <th>대출일</th>
                </tr>
            </thead>
            <tbody>
                {% for loan in loans %}
                <tr>
                    <td>{{ loan.id }}</td>
                    <td>{{ loan.username }}</td>
                    <td>{{ "{:,}".format(loan.loan_amount) }}</td>
                    <td>{{ "{:,}".format(loan.paid_amount) }}</td>
                    <td>{{ "{:,}".format(loan.total_repay_amount - loan.paid_amount) }}</td>
                    <td>{{ loan.status }}</td>
                    <td>{{ loan.loan_date.split('T')[0] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>대출 정보가 없습니다.</p>
        {% endif %}
    </div>
{% endblock %}